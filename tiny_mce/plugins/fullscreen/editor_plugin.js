(function(){var a=tinymce.DOM;tinymce.create("tinymce.plugins.FullScreenPlugin",{init:function(c,i){var d=this,b={},e,h;d.editor=c;c.addCommand("mceFullScreen",function(){var f,g=a.doc.documentElement;if(c.getParam("fullscreen_is_enabled"))c.getParam("fullscreen_new_window")?closeFullscreen():a.win.setTimeout(function(){tinymce.dom.Event.remove(a.win,"resize",d.resizeFunc);tinyMCE.get(c.getParam("fullscreen_editor_id")).setContent(c.getContent());tinyMCE.remove(c);a.remove("mce_fullscreen_container");
g.style.overflow=c.getParam("fullscreen_html_overflow");a.setStyle(a.doc.body,"overflow",c.getParam("fullscreen_overflow"));a.win.scrollTo(c.getParam("fullscreen_scrollx"),c.getParam("fullscreen_scrolly"));tinyMCE.settings=tinyMCE.oldSettings;null!==a.doc.getElementById("e7edit-panel")&&(a.show(a.doc.getElementById("e7edit-panel")),a.show(a.doc.getElementById("wrap")))},10);else if(c.getParam("fullscreen_new_window")){f=a.win.open(i+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+
screen.availWidth+",height="+screen.availHeight);try{f.resizeTo(screen.availWidth,screen.availHeight)}catch(k){}}else{tinyMCE.oldSettings=tinyMCE.settings;b.fullscreen_overflow=a.getStyle(a.doc.body,"overflow",1)||"auto";b.fullscreen_html_overflow=a.getStyle(g,"overflow",1);e=a.getViewPort();b.fullscreen_scrollx=e.x;b.fullscreen_scrolly=e.y;b.orgEditorWidth=d.editor.contentDocument.body.offsetWidth;tinymce.isOpera&&"visible"==b.fullscreen_overflow&&(b.fullscreen_overflow="auto");tinymce.isIE&&"scroll"==
b.fullscreen_overflow&&(b.fullscreen_overflow="auto");if(tinymce.isIE&&("visible"==b.fullscreen_html_overflow||"scroll"==b.fullscreen_html_overflow))b.fullscreen_html_overflow="auto";"0px"==b.fullscreen_overflow&&(b.fullscreen_overflow="");a.setStyle(a.doc.body,"overflow","hidden");if(null!==a.doc.getElementById("e7edit-panel")){f=a.doc.getElementById("e7edit-panel");var j=a.doc.getElementById("wrap");a.setStyle(f,"display","none");a.setStyle(j,"display","none")}g.style.overflow="hidden";e=a.getViewPort();
a.win.scrollTo(0,0);tinymce.isIE&&(e.h-=1);h=tinymce.isIE6||"BackCompat"==document.compatMode?"absolute;top:"+e.y:"fixed;top:0";n=a.add(a.doc.body,"div",{id:"mce_fullscreen_container",style:"position:"+h+";left:0;width:"+e.w+"px;height:"+e.h+"px;z-index:200000; background-color:#FFF;"});a.add(n,"div",{id:"mce_fullscreen"});tinymce.each(c.settings,function(a,c){b[c]=a});b.id="mce_fullscreen";b.width=n.clientWidth;b.height=n.clientHeight-15;b.fullscreen_is_enabled=!0;b.fullscreen_editor_id=c.id;b.theme_advanced_resizing=
!1;b.save_onsavecallback=function(){c.setContent(tinyMCE.get(b.id).getContent());c.execCommand("mceSave")};tinymce.each(c.getParam("fullscreen_settings"),function(a,c){b[c]=a});"external"===b.theme_advanced_toolbar_location&&(b.theme_advanced_toolbar_location="top");b.body_class="main-content fullscreen";b.theme_advanced_buttons1="save,|,undo,redo,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,forecolor,backcolor,formatselect,fontselect,fontsizeselect,styleselect";
b.theme_advanced_buttons2="cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,|,link,unlink,anchor,image,media,|,table,|,row_props,row_after,delete_row,|,col_after,delete_col,|,split_cells,merge_cells,|,removeformat,cleanup,visualaid,|,fullscreen,code,preview";b.theme_advanced_buttons3="";b.theme_advanced_buttons4="";d.fullscreenEditor=new tinymce.Editor("mce_fullscreen",b);d.fullscreenEditor.onInit.add(function(){d.fullscreenEditor.setContent(c.getContent());d.fullscreenEditor.focus()});
d.fullscreenEditor.render();d.fullscreenElement=new tinymce.dom.Element("mce_fullscreen_container");d.fullscreenElement.update();a.setStyle(d.fullscreenEditor.contentDocument.body,"width",b.orgEditorWidth);d.container=new tinymce.dom.Element(d.fullscreenEditor.editorContainer);d.container.add("span",{id:"close_fullscreen_btn",title:"Exit full screen",onClick:"tinyMCE.get('mce_fullscreen').execCommand('mceFullScreen');return false;"},"&nbsp;");d.container.setStyle("opacity","0");a.win.setTimeout(function(){d.container.setStyles({opacity:"1",
"-moz-transition":"opacity 1s","-webkit-transition":"opacity 1s",transition:"opacity 1s"})},150);d.resizeFunc=tinymce.dom.Event.add(a.win,"resize",function(){var a=tinymce.DOM.getViewPort(),b=d.fullscreenEditor,c,e;c=b.dom.getSize(b.getContainer().getElementsByTagName("table")[0]);e=b.dom.getSize(b.getContainer().getElementsByTagName("iframe")[0]);b.theme.resizeTo(a.w-c.w+e.w,a.h-c.h+e.h)})}});c.addButton("fullscreen",{title:"fullscreen.desc",cmd:"mceFullScreen"});c.onNodeChange.add(function(a,b){b.setActive("fullscreen",
a.getParam("fullscreen_is_enabled"))})},getInfo:function(){return{longname:"Fullscreen",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("fullscreen",tinymce.plugins.FullScreenPlugin)})();