(function(m){function r(a,b){var c,d=a.dom,e="",g;previewStyles=a.settings.preview_styles;if(!1===previewStyles)return"";previewStyles||(previewStyles="font-family font-size font-weight text-decoration text-transform color background-color");c=d.create(b.block||b.inline||"span");n(b.styles,function(a,b){(a=a.replace(/%(\w+)/g,""))&&d.setStyle(c,b,a)});n(b.attributes,function(a,b){(a=a.replace(/%(\w+)/g,""))&&d.setAttrib(c,b,a)});n(b.classes,function(a){a=a.replace(/%(\w+)/g,"");d.hasClass(c,a)||d.addClass(c,
a)});d.setStyles(c,{position:"absolute",left:-65535});a.getBody().appendChild(c);g=d.getStyle(a.getBody(),"fontSize",!0);g=/px$/.test(g)?parseInt(g,10):0;n(previewStyles.split(" "),function(b){var h=d.getStyle(c,b,!0);if("background-color"==b&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(h)&&(h=d.getStyle(a.getBody(),b,!0),"#ffffff"==d.toHex(h).toLowerCase()))return;if("font-size"==b&&/em|%$/.test(h)){if(0===g)return;h=parseFloat(h,10)/(/%$/.test(h)?100:1);h=h*g+"px"}e+=b+":"+h+";"});d.remove(c);return e}
var f=m.DOM,l=m.dom.Event,A=m.extend,n=m.each,B=m.util.Cookie,C,z=m.explode;m.ThemeManager.requireLangPack("advanced");m.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc",
"JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc",
"InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc",
"mceBlockQuote"]},stateControls:"bold italic underline strikethrough bullist numlist justifyleft justifycenter justifyright justifyfull sub sup blockquote".split(" "),init:function(a,b){var c=this,d,e,g;c.editor=a;c.url=b;c.onResolveName=new m.util.Dispatcher(this);d=a.settings;a.forcedHighContrastMode=a.settings.detect_highcontrast&&c._isHighContrast();a.settings.skin=a.forcedHighContrastMode?"highcontrast":a.settings.skin;d.theme_advanced_buttons1||(d=A({theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",
theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap"},d));c.settings=d=A({theme_advanced_path:!0,theme_advanced_toolbar_location:"top",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"left",theme_advanced_statusbar_location:"bottom",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",
theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_font_selector:"span",theme_advanced_show_current_color:0,readonly:a.settings.readonly},d);d.font_size_style_values||(d.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt");m.is(d.theme_advanced_font_sizes,"string")&&(d.font_size_style_values=m.explode(d.font_size_style_values),d.font_size_classes=m.explode(d.font_size_classes||
""),g={},a.settings.theme_advanced_font_sizes=d.theme_advanced_font_sizes,n(a.getParam("theme_advanced_font_sizes","","hash"),function(a,b){var e;b==a&&(1<=a&&7>=a)&&(b=a+" ("+c.sizes[a-1]+"pt)",e=d.font_size_classes[a-1],a=d.font_size_style_values[a-1]||c.sizes[a-1]+"pt");/^\s*\./.test(a)&&(e=a.replace(/\./g,""));g[b]=e?{"class":e}:{fontSize:a}}),d.theme_advanced_font_sizes=g);if((e=d.theme_advanced_path_location)&&"none"!=e)d.theme_advanced_statusbar_location=d.theme_advanced_path_location;"none"==
d.theme_advanced_statusbar_location&&(d.theme_advanced_statusbar_location=0);!1!==a.settings.content_css&&a.contentCSS.push(a.baseURI.toAbsolute(b+"/skins/"+a.settings.skin+"/content.css"));a.onInit.add(function(){a.settings.readonly||(a.onNodeChange.add(c._nodeChanged,c),a.onKeyUp.add(c._updateUndoStatus,c),a.onMouseUp.add(c._updateUndoStatus,c),a.dom.bind(a.dom.getRoot(),"dragend",function(){c._updateUndoStatus(a)}))});a.onSetProgressState.add(function(a,b,d){var e,g=a.id,q;b?c.progressTimer=setTimeout(function(){e=
a.getContainer();e=e.insertBefore(f.create("DIV",{style:"position:relative"}),e.firstChild);q=f.get(a.id+"_tbl");f.add(e,"div",{id:g+"_blocker","class":"mceBlocker",style:{width:q.clientWidth+2,height:q.clientHeight+2}});f.add(e,"div",{id:g+"_progress","class":"mceProgress",style:{left:q.clientWidth/2,top:q.clientHeight/2}})},d||0):(f.remove(g+"_blocker"),f.remove(g+"_progress"),clearTimeout(c.progressTimer))});f.loadCSS(d.editor_css?a.documentBaseURI.toAbsolute(d.editor_css):b+"/skins/"+a.settings.skin+
"/ui.css");d.skin_variant&&f.loadCSS(b+"/skins/"+a.settings.skin+"/ui_"+d.skin_variant+".css")},_isHighContrast:function(){var a,b=f.add(f.getRoot(),"div",{style:"background-color: rgb(171,239,86);"});a=(f.getStyle(b,"background-color",!0)+"").toLowerCase().replace(/ /g,"");f.remove(b);return"rgb(171,239,86)"!=a&&"#abef56"!=a},createControl:function(a,b){var c;if(c=b.createControl(a))return c;switch(a){case "styleselect":return this._createStyleSelect();case "formatselect":return this._createBlockFormats();
case "fontselect":return this._createFontSelect();case "fontsizeselect":return this._createFontSizeSelect();case "forecolor":return this._createForeColorMenu();case "backcolor":return this._createBackColorMenu()}if(c=this.controls[a])return b.createButton(a,{title:"advanced."+c[0],cmd:c[1],ui:c[2],value:c[3]})},execCommand:function(a,b,c){return(a=this["_"+a])?(a.call(this,b,c),!0):!1},_importClasses:function(){var a=this.editor,b=a.controlManager.get("styleselect");0==b.getLength()&&n(a.dom.getClasses(),
function(c,d){var e="style_"+d,g;g={inline:"span",attributes:{"class":c["class"]},selector:"*"};a.formatter.register(e,g);b.add(c["class"],e,{style:function(){return r(a,g)}})})},_createStyleSelect:function(){var a=this,b=a.editor,c;c=b.controlManager.createListBox("styleselect",{title:"advanced.style_select",onselect:function(a){var e,g=[],f;n(c.items,function(a){g.push(a.value)});b.focus();b.undoManager.add();e=b.formatter.matchAll(g);m.each(e,function(c){if(!a||c==a)c&&b.formatter.remove(c),f=
!0});f||b.formatter.apply(a);b.undoManager.add();b.nodeChanged();return!1}});b.onPreInit.add(function(){var d=0,e=b.getParam("style_formats");e?n(e,function(a){var e,f=0;n(a,function(){f++});1<f?(e=a.name=a.name||"style_"+d++,b.formatter.register(e,a),c.add(a.title,e,{style:function(){return r(b,a)}})):c.add(a.title)}):n(b.getParam("theme_advanced_styles","","hash"),function(e,f){var h,p;e&&(h="style_"+d++,p={inline:"span",classes:e,selector:"*"},b.formatter.register(h,p),c.add(a.editor.translate(f),
h,{style:function(){return r(b,p)}}))})});0==c.getLength()&&c.onPostRender.add(function(b,e){c.NativeListBox?l.add(e.id,"focus",a._importClasses,a):(l.add(e.id+"_text","focus",a._importClasses,a),l.add(e.id+"_text","mousedown",a._importClasses,a),l.add(e.id+"_open","focus",a._importClasses,a),l.add(e.id+"_open","mousedown",a._importClasses,a))});return c},_createFontSelect:function(){var a,b=this.editor;(a=b.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(c){var d=
a.items[a.selectedIndex];if(!c&&d)b.execCommand("FontName",!1,d.value);else return b.execCommand("FontName",!1,c),a.select(function(a){return c==a}),d&&d.value==c&&a.select(null),!1}}))&&n(b.getParam("theme_advanced_fonts",this.settings.theme_advanced_fonts,"hash"),function(c,d){a.add(b.translate(d),c,{style:-1==c.indexOf("dings")?"font-family:"+c:""})});return a},_createFontSizeSelect:function(){var a=this,b=a.editor,c,d=0;(c=b.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",
onselect:function(a){var d=c.items[c.selectedIndex];if(!a&&d)d=d.value,d["class"]?(b.formatter.toggle("fontsize_class",{value:d["class"]}),b.undoManager.add(),b.nodeChanged()):b.execCommand("FontSize",!1,d.fontSize);else return a["class"]?(b.focus(),b.undoManager.add(),b.formatter.toggle("fontsize_class",{value:a["class"]}),b.undoManager.add(),b.nodeChanged()):b.execCommand("FontSize",!1,a.fontSize),c.select(function(b){return a==b}),d&&(d.value.fontSize==a.fontSize||d.value["class"]&&d.value["class"]==
a["class"])&&c.select(null),!1}}))&&n(a.settings.theme_advanced_font_sizes,function(b,f){var i=b.fontSize;1<=i&&7>=i&&(i=a.sizes[parseInt(i)-1]+"pt");c.add(f,b,{style:"font-size:"+i,"class":"mceFontSize"+d++ +(" "+(b["class"]||""))})});return c},_createBlockFormats:function(){var a,b={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",
code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},c=this;(a=c.editor.controlManager.createListBox("formatselect",{title:"advanced.block",onselect:function(a){c.editor.execCommand("FormatBlock",!1,a);return!1}}))&&n(c.editor.getParam("theme_advanced_blockformats",c.settings.theme_advanced_blockformats,"hash"),function(d,e){a.add(c.editor.translate(e!=d?e:b[d]),d,{"class":"mce_formatPreview mce_"+d,style:function(){return r(c.editor,{block:d})}})});return a},_createForeColorMenu:function(){var a,
b=this,c=b.settings,d={},e;c.theme_advanced_more_colors&&(d.more_colors_func=function(){b._mceColorPicker(0,{color:a.value,func:function(b){a.setColor(b)}})});if(e=c.theme_advanced_text_colors)d.colors=e;c.theme_advanced_default_foreground_color&&(d.default_color=c.theme_advanced_default_foreground_color);d.title="advanced.forecolor_desc";d.cmd="ForeColor";d.scope=this;return a=b.editor.controlManager.createColorSplitButton("forecolor",d)},_createBackColorMenu:function(){var a,b=this,c=b.settings,
d={},e;c.theme_advanced_more_colors&&(d.more_colors_func=function(){b._mceColorPicker(0,{color:a.value,func:function(b){a.setColor(b)}})});if(e=c.theme_advanced_background_colors)d.colors=e;c.theme_advanced_default_background_color&&(d.default_color=c.theme_advanced_default_background_color);d.title="advanced.backcolor_desc";d.cmd="HiliteColor";d.scope=this;return a=b.editor.controlManager.createColorSplitButton("backcolor",d)},renderUI:function(a){var b,c,d,e=this,g=e.editor,i=e.settings,h,p,j;g.settings&&
(g.settings.aria_label=i.aria_label+g.getLang("advanced.help_shortcut"));b=p=f.create("span",{role:"application","aria-labelledby":g.id+"_voice",id:g.id+"_parent","class":"mceEditor "+g.settings.skin+"Skin"+(i.skin_variant?" "+g.settings.skin+"Skin"+e._ufirst(i.skin_variant):"")+("rtl"==g.settings.directionality?" mceRtl":"")});f.add(b,"span",{"class":"mceVoiceLabel",style:"display:none;",id:g.id+"_voice"},i.aria_label);f.boxModel||(b=f.add(b,"div",{"class":"mceOldBoxModel"}));b=h=f.add(b,"table",
{role:"presentation",id:g.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0});b=d=f.add(b,"tbody");switch((i.theme_advanced_layout_manager||"").toLowerCase()){case "rowlayout":c=e._rowLayout(i,d,a);break;case "customlayout":c=g.execCallback("theme_advanced_custom_layout",i,d,a,p);break;default:c=e._simpleLayout(i,d,a,p)}b=a.targetNode;j=h.rows;f.addClass(j[0],"mceFirst");f.addClass(j[j.length-1],"mceLast");n(f.select("tr",d),function(a){f.addClass(a.firstChild,"mceFirst");f.addClass(a.childNodes[a.childNodes.length-
1],"mceLast")});f.get(i.theme_advanced_toolbar_container)?f.get(i.theme_advanced_toolbar_container).appendChild(p):f.insertAfter(p,b);l.add(g.id+"_path_row","click",function(a){a=a.target;if("A"==a.nodeName)return e._sel(a.className.replace(/^.*mcePath_([0-9]+).*$/,"$1")),!1});g.getParam("accessibility_focus")||l.add(f.add(p,"a",{href:"#"},"<\!-- IE --\>"),"focus",function(){tinyMCE.get(g.id).focus()});"external"==i.theme_advanced_toolbar_location&&(a.deltaHeight=0);e.deltaHeight=a.deltaHeight;a.targetNode=
null;g.onKeyDown.add(function(a,b){if(b.altKey){if(121===b.keyCode)return m.isWebKit&&window.focus(),e.toolbarGroup.focus(),l.cancel(b);if(122===b.keyCode)return f.get(a.id+"_path_row").focus(),l.cancel(b)}});g.addShortcut("alt+0","","mceShortcuts",e);return{iframeContainer:c,editorContainer:g.id+"_parent",sizeContainer:h,deltaHeight:a.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:m.majorVersion+"."+
m.minorVersion}},resizeBy:function(a,b){var c=f.get(this.editor.id+"_ifr");this.resizeTo(c.clientWidth+a,c.clientHeight+b)},resizeTo:function(a,b,c){var d=this.editor,e=this.settings,g=f.get(d.id+"_tbl"),i=f.get(d.id+"_ifr"),a=Math.max(e.theme_advanced_resizing_min_width||100,a),b=Math.max(e.theme_advanced_resizing_min_height||100,b),a=Math.min(e.theme_advanced_resizing_max_width||65535,a),b=Math.min(e.theme_advanced_resizing_max_height||65535,b);f.setStyle(g,"height","");f.setStyle(i,"height",b);
e.theme_advanced_resize_horizontal&&(f.setStyle(g,"width",""),f.setStyle(i,"width",a),a<g.clientWidth&&(a=g.clientWidth,f.setStyle(i,"width",g.clientWidth)));c&&e.theme_advanced_resizing_use_cookie&&B.setHash("TinyMCE_"+d.id+"_size",{cw:a,ch:b})},destroy:function(){var a=this.editor.id;l.clear(a+"_resize");l.clear(a+"_path_row");l.clear(a+"_external_close")},_simpleLayout:function(a,b,c,d){var e=this.editor,g=a.theme_advanced_toolbar_location,i=a.theme_advanced_statusbar_location,h,p,j;if(a.readonly)return h=
f.add(b,"tr"),h=p=f.add(h,"td",{"class":"mceIframeContainer"});"top"==g&&this._addToolbars(b,c);"external"==g&&(h=j=f.create("div",{style:"position:relative"}),h=f.add(h,"div",{id:e.id+"_external","class":"mceExternalToolbar"}),f.add(h,"a",{id:e.id+"_external_close",href:"javascript:;","class":"mceExternalClose"}),h=f.add(h,"table",{id:e.id+"_tblext",cellSpacing:0,cellPadding:0}),h=f.add(h,"tbody"),"mceOldBoxModel"==d.firstChild.className?d.firstChild.appendChild(j):d.insertBefore(j,d.firstChild),
this._addToolbars(h,c),e.onMouseUp.add(function(){var a=f.get(e.id+"_external");f.show(a);f.hide(C);var b=l.add(e.id+"_external_close","click",function(){f.hide(e.id+"_external");l.remove(e.id+"_external_close","click",b);return!1});f.show(a);f.setStyle(a,"top",0-f.getRect(e.id+"_tblext").h-1);f.hide(a);f.show(a);a.style.filter="";C=e.id+"_external";a=null}));"top"==i&&this._addStatusBar(b,c);a.theme_advanced_toolbar_container||(h=f.add(b,"tr"),h=p=f.add(h,"td",{"class":"mceIframeContainer"}));"bottom"==
g&&this._addToolbars(b,c);"bottom"==i&&this._addStatusBar(b,c);return p},_rowLayout:function(a,b,c){var d=this,e,g,i=d.editor.controlManager,h,p,j,k;e=a.theme_advanced_containers_default_class||"";g=a.theme_advanced_containers_default_align||"center";n(z(a.theme_advanced_containers||""),function(l,m){var n=a["theme_advanced_container_"+l]||"";switch(l.toLowerCase()){case "mceeditor":h=f.add(b,"tr");h=p=f.add(h,"td",{"class":"mceIframeContainer"});break;case "mceelementpath":d._addStatusBar(b,c);break;
default:k=(a["theme_advanced_container_"+l+"_align"]||g).toLowerCase(),k="mce"+d._ufirst(k),h=f.add(f.add(b,"tr"),"td",{"class":"mceToolbar "+(a["theme_advanced_container_"+l+"_class"]||e)+" "+k||g}),j=i.createToolbar("toolbar"+m),d._addControls(n,j),f.setHTML(h,j.renderHTML()),c.deltaHeight-=a.theme_advanced_row_height}});return p},_addControls:function(a,b){var c=this,d=c.settings,e,f=c.editor.controlManager;d.theme_advanced_disable&&!c._disabled?(e={},n(z(d.theme_advanced_disable),function(a){e[a]=
1}),c._disabled=e):e=c._disabled;n(z(a),function(a){if(!e||!e[a])"tablecontrols"==a?n("table | row_props cell_props | row_before row_after delete_row | col_before col_after delete_col | split_cells merge_cells".split(" "),function(a){(a=c.createControl(a,f))&&b.add(a)}):(a=c.createControl(a,f))&&b.add(a)})},_addToolbars:function(a,b){var c,d,e=this.editor,g=this.settings,i,h=e.controlManager,l,j=[],k,m=!1;this.toolbarGroup=k=h.createToolbarGroup("toolbargroup",{name:e.getLang("advanced.toolbar"),
tab_focus_toolbar:e.getParam("theme_advanced_tab_focus_toolbar")});c=g.theme_advanced_toolbar_align.toLowerCase();c="mce"+this._ufirst(c);l=f.add(f.add(a,"tr",{role:"presentation"}),"td",{"class":"mceToolbar "+c,role:"presentation"});for(c=1;i=g["theme_advanced_buttons"+c];c++)m=!0,d=h.createToolbar("toolbar"+c,{"class":"mceToolbarRow"+c}),g["theme_advanced_buttons"+c+"_add"]&&(i+=","+g["theme_advanced_buttons"+c+"_add"]),g["theme_advanced_buttons"+c+"_add_before"]&&(i=g["theme_advanced_buttons"+
c+"_add_before"]+","+i),this._addControls(i,d),k.add(d),b.deltaHeight-=g.theme_advanced_row_height;m||(b.deltaHeight-=g.theme_advanced_row_height);j.push(k.renderHTML());j.push(f.createHTML("a",{href:"#",accesskey:"z",title:e.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+e.id+"').focus();"},"<\!-- IE --\>"));f.setHTML(l,j.join(""))},_addStatusBar:function(a,b){var c,d=this,e=d.editor,g=d.settings,i;c=f.add(a,"tr");c=i=f.add(c,"td",{"class":"mceStatusbar"});c=f.add(c,"div",
{id:e.id+"_path_row",role:"group","aria-labelledby":e.id+"_path_voice"});g.theme_advanced_path?(f.add(c,"span",{id:e.id+"_path_voice"},e.translate("advanced.path")),f.add(c,"span",{},": ")):f.add(c,"span",{},"&#160;");g.theme_advanced_resizing&&(f.add(i,"a",{id:e.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize",tabIndex:"-1"}),g.theme_advanced_resizing_use_cookie&&e.onPostRender.add(function(){var a=B.getHash("TinyMCE_"+e.id+"_size");f.get(e.id+"_tbl");a&&d.resizeTo(a.cw,
a.ch)}),e.onPostRender.add(function(){l.add(e.id+"_resize","click",function(a){a.preventDefault()});l.add(e.id+"_resize","mousedown",function(a){function b(a){a.preventDefault();x=s+(a.screenX-u);y=v+(a.screenY-t);d.resizeTo(x,y)}function c(a){l.remove(f.doc,"mousemove",g);l.remove(e.getDoc(),"mousemove",i);l.remove(f.doc,"mouseup",m);l.remove(e.getDoc(),"mouseup",n);x=s+(a.screenX-u);y=v+(a.screenY-t);d.resizeTo(x,y,!0);e.nodeChanged()}var g,i,m,n,u,t,s,v,x,y;a.preventDefault();u=a.screenX;t=a.screenY;
a=f.get(d.editor.id+"_ifr");s=x=a.clientWidth;v=y=a.clientHeight;g=l.add(f.doc,"mousemove",b);i=l.add(e.getDoc(),"mousemove",b);m=l.add(f.doc,"mouseup",c);n=l.add(e.getDoc(),"mouseup",c)})}));b.deltaHeight-=21;c=a=null},_updateUndoStatus:function(a){var b=a.controlManager,a=a.undoManager;b.setDisabled("undo",!a.hasUndo()&&!a.typing);b.setDisabled("redo",!a.hasRedo())},_nodeChanged:function(a,b,c,d,e){function g(a){var b,c=e.parents,d=a;"string"==typeof a&&(d=function(b){return b.nodeName==a});for(b=
0;b<c.length;b++)if(d(c[b]))return c[b]}var i=this,h,l=0,j,k,q=i.settings,r,w,u,t,s,v;m.each(i.stateControls,function(c){b.setActive(c,a.queryCommandState(i.controls[c][1]))});b.setActive("visualaid",a.hasVisual);i._updateUndoStatus(a);b.setDisabled("outdent",!a.queryCommandState("Outdent"));h=g("A");if(k=b.get("link"))k.setDisabled(!h&&d||h&&!h.href),k.setActive(!!h&&!h.name&&!h.id);if(k=b.get("unlink"))k.setDisabled(!h&&d),k.setActive(!!h&&!h.name&&!h.id);if(k=b.get("anchor"))k.setActive(!d&&!!h&&
(h.name||h.id&&!h.href));h=g("IMG");(k=b.get("image"))&&k.setActive(!d&&!!h&&-1==c.className.indexOf("mceItem"));if(k=b.get("styleselect"))i._importClasses(),v=[],n(k.items,function(a){v.push(a.value)}),d=a.formatter.matchAll(v),k.select(d[0]),m.each(d,function(a,b){0<b&&k.mark(a)});if(k=b.get("formatselect"))(h=g(a.dom.isBlock))&&k.select(h.nodeName.toLowerCase());g(function(b){"SPAN"===b.nodeName&&(!r&&b.className)&&(r=b.className);a.dom.is(b,q.theme_advanced_font_selector)&&(!w&&b.style.fontSize&&
(w=b.style.fontSize),!u&&b.style.fontFamily&&(u=b.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase()),!t&&b.style.color&&(t=b.style.color),!s&&b.style.backgroundColor&&(s=b.style.backgroundColor));return!1});(k=b.get("fontselect"))&&k.select(function(a){return a.replace(/^([^,]+).*/,"$1").toLowerCase()==u});if(k=b.get("fontsizeselect"))q.theme_advanced_runtime_fontsize&&(!w&&!r)&&(w=a.dom.getStyle(c,"fontSize",!0)),k.select(function(a){if(a.fontSize&&a.fontSize===w||
a["class"]&&a["class"]===r)return!0});q.theme_advanced_show_current_color&&(c=function(a,c){if(k=b.get(a))c||(c=k.settings.default_color),c!==k.value&&k.displayColor(c)},c("forecolor",t),c("backcolor",s));q.theme_advanced_show_current_color&&(c=function(a,c){if(k=b.get(a))c||(c=k.settings.default_color),c!==k.value&&k.displayColor(c)},c("forecolor",t),c("backcolor",s));q.theme_advanced_path&&q.theme_advanced_statusbar_location&&(h=f.get(a.id+"_path")||f.add(a.id+"_path_row","span",{id:a.id+"_path"}),
i.statusKeyboardNavigation&&(i.statusKeyboardNavigation.destroy(),i.statusKeyboardNavigation=null),f.setHTML(h,""),g(function(b){var c=b.nodeName.toLowerCase(),d="";if(!(1!=b.nodeType||"br"===c||b.getAttribute("data-mce-bogus")||f.hasClass(b,"mceItemHidden")||f.hasClass(b,"mceItemRemoved"))){m.isIE&&("HTML"!==b.scopeName&&b.scopeName)&&(c=b.scopeName+":"+c);c=c.replace(/mce\:/g,"");switch(c){case "b":c="strong";break;case "i":c="em";break;case "img":if(j=f.getAttrib(b,"src"))d+="src: "+j+" ";break;
case "a":if(j=f.getAttrib(b,"name"))d+="name: "+j+" ",c+="#"+j;if(j=f.getAttrib(b,"href"))d+="href: "+j+" ";break;case "font":if(j=f.getAttrib(b,"face"))d+="font: "+j+" ";if(j=f.getAttrib(b,"size"))d+="size: "+j+" ";if(j=f.getAttrib(b,"color"))d+="color: "+j+" ";break;case "span":if(j=f.getAttrib(b,"style"))d+="style: "+j+" "}if(j=f.getAttrib(b,"id"))d+="id: "+j+" ";if(j=b.className)if(j=j.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,""))if(d+="class: "+j+" ",a.dom.isBlock(b)||"img"==c||"span"==c)c+=
"."+j;c=c.replace(/(html:)/g,"");c={name:c,node:b,title:d};i.onResolveName.dispatch(i,c);d=c.title;c=c.name;b=f.create("a",{href:"javascript:;",role:"button",onmousedown:"return false;",title:d,"class":"mcePath_"+l++},c);h.hasChildNodes()?(h.insertBefore(f.create("span",{"aria-hidden":"true"},"\u00a0\u00bb "),h.firstChild),h.insertBefore(b,h.firstChild)):h.appendChild(b)}},a.getBody()),0<f.select("a",h).length&&(i.statusKeyboardNavigation=new m.ui.KeyboardNavigation({root:a.id+"_path_row",items:f.select("a",
h),excludeFromTabOrder:!0,onCancel:function(){a.focus()}},f)))},_sel:function(a){this.editor.execCommand("mceSelectNodeDepth",!1,a)},_mceInsertAnchor:function(){var a=this.editor;a.windowManager.open({url:this.url+"/anchor.htm",width:320+parseInt(a.getLang("advanced.anchor_delta_width",0)),height:105+parseInt(a.getLang("advanced.anchor_delta_height",0)),inline:!0},{theme_url:this.url})},_mceCharMap:function(){var a=this.editor;a.windowManager.open({url:this.url+"/charmap.htm",width:550+parseInt(a.getLang("advanced.charmap_delta_width",
0)),height:265+parseInt(a.getLang("advanced.charmap_delta_height",0)),inline:!0},{theme_url:this.url})},_mceHelp:function(){this.editor.windowManager.open({url:this.url+"/about.htm",width:480,height:380,inline:!0},{theme_url:this.url})},_mceShortcuts:function(){this.editor.windowManager.open({url:this.url+"/shortcuts.htm",width:480,height:380,inline:!0},{theme_url:this.url})},_mceColorPicker:function(a,b){var c=this.editor,b=b||{};c.windowManager.open({url:this.url+"/color_picker.htm",width:375+parseInt(c.getLang("advanced.colorpicker_delta_width",
0)),height:270+parseInt(c.getLang("advanced.colorpicker_delta_height",0)),close_previous:!1,inline:!0},{input_color:b.color,func:b.func,theme_url:this.url})},_mceCodeEditor:function(){var a=this.editor;a.windowManager.open({url:this.url+"/source_editor.htm",width:720+parseInt(a.getParam("theme_advanced_source_editor_width",0)),height:500+parseInt(a.getParam("theme_advanced_source_editor_height",0)),inline:!0,resizable:!0,maximizable:!0},{theme_url:this.url})},_mceImage:function(){var a=this.editor;
-1==a.dom.getAttrib(a.selection.getNode(),"class","").indexOf("mceItem")&&a.windowManager.open({url:this.url+"/image.htm",width:355+parseInt(a.getLang("advanced.image_delta_width",0)),height:275+parseInt(a.getLang("advanced.image_delta_height",0)),inline:!0},{theme_url:this.url})},_mceLink:function(){var a=this.editor;a.windowManager.open({url:this.url+"/link.htm",width:340+parseInt(a.getLang("advanced.link_delta_width",0)),height:215+parseInt(a.getLang("advanced.link_delta_height",0)),inline:!0},
{theme_url:this.url})},_mceNewDocument:function(){var a=this.editor;a.windowManager.confirm("advanced.newdocument",function(b){b&&a.execCommand("mceSetContent",!1,"")})},_mceForeColor:function(){var a=this;this._mceColorPicker(0,{color:a.fgColor,func:function(b){a.fgColor=b;a.editor.execCommand("ForeColor",!1,b)}})},_mceBackColor:function(){var a=this;this._mceColorPicker(0,{color:a.bgColor,func:function(b){a.bgColor=b;a.editor.execCommand("HiliteColor",!1,b)}})},_ufirst:function(a){return a.substring(0,
1).toUpperCase()+a.substring(1)}});m.ThemeManager.add("advanced",m.themes.AdvancedTheme)})(tinymce);